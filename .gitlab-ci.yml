stages:
  - test
  - build
  - deploy
test:
  stage: test
  script:
    - echo "Testing the app"
    - echo $CI_JOB_STAGE
   # - curl -fsSL https://get.docker.com -o get-docker.sh
    - apt-get install libffi-dev libssl-dev
    - apt install python3-dev
    - apt-get install -y python3 python3-pip
#    - apk add --no-cache python py2-pip
#    - pip install --no-cache-dir docker-compose
   # - pip install docker-compose
    - pip3 install docker-compose
    - docker-compose -v
build:
  stage: build
  script:
  - ls -l
  - echo "Building the app"
  #- docker-compose build # need to be isntalled or registerd on the runner
deploy_staiging:
  stage: deploy
  only:
  - master
  script:
  - echo "Deploying the app"
  # - docker-compose up -d # need to be isntalled or registerd on the runner
  - docker-compose up --build
